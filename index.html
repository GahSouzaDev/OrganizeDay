<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>OrganizeDay | Organize seu dia</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css">
    <link rel="manifest" href="/manifest.json">
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>üìÖ</text></svg>">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/js-cookie@3.0.5/dist/js.cookie.min.js"></script>
    <style>
        :root {
            --primary: #4361ee;
            --primary-light: #4cc9f0;
            --secondary: #3f37c9;
            --success: #4ade80;
            --danger: #f72585;
            --warning: #f59e0b;
            --dark: #1e293b;
            --darker: #0f172a;
            --light: #f8fafc;
            --gray: #94a3b8;
            --card-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);
            --transition: all 0.3s ease;
        }

        [data-theme="dark"] {
            --primary: #5a76ff;
            --primary-light: #6ae1ff;
            --secondary: #4f46e5;
            --success: #65e891;
            --danger: #ff3d96;
            --warning: #ffb74d;
            --dark: #e2e8f0;
            --darker: #f1f5f9;
            --light: #0f172a;
            --gray: #64748b;
            --card-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
        }

        body {
            background: linear-gradient(135deg, #f0f9ff 0%, #e0f2fe 100%);
            color: var(--darker);
            min-height: 100vh;
            padding-bottom: 80px;
            line-height: 1.6;
            transition: var(--transition);
        }

        [data-theme="dark"] body {
            background: linear-gradient(135deg, #0c1a2d 0%, #111827 100%);
            color: var(--darker);
        }

        /* Header */
        header {
            background: linear-gradient(to right, var(--primary), var(--secondary));
            color: white;
            padding: 1rem 1rem 0.8rem;
            box-shadow: 0 2px 15px rgba(0, 0, 0, 0.1);
            position: sticky;
            top: 0;
            z-index: 100;
        }

        .header-content {
            max-width: 1200px;
            margin: 0 auto;
            width: 100%;
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
        }

        .logo-container {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 10px;
        }

        .logo {
            font-size: 1.5rem;
            font-weight: 700;
            letter-spacing: -0.5px;
        }

        .logo-icon {
            background: white;
            color: var(--primary);
            width: 36px;
            height: 36px;
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.2rem;
        }

        .tabs-container {
            width: 100%;
            overflow-x: auto;
            padding-bottom: 5px;
            scrollbar-width: thin;
            scrollbar-color: rgba(255,255,255,0.3) transparent;
        }

        .tabs {
            display: flex;
            background: rgba(255, 255, 255, 0.15);
            border-radius: 50px;
            padding: 3px;
            min-width: max-content;
        }

        .tabs::-webkit-scrollbar {
            height: 4px;
        }

        .tabs::-webkit-scrollbar-thumb {
            background: rgba(255,255,255,0.3);
            border-radius: 2px;
        }

        .tab {
            flex: 1;
            min-width: 90px;
            text-align: center;
            padding: 8px 5px;
            border-radius: 50px;
            font-weight: 500;
            cursor: pointer;
            transition: var(--transition);
            white-space: nowrap;
            font-size: 0.85rem;
        }

        .tab.active {
            background: white;
            color: var(--primary);
            box-shadow: 0 2px 6px rgba(0, 0, 0, 0.1);
        }

        .header-actions {
            display: flex;
            gap: 10px;
            align-items: center;
            margin-bottom: 10px;
        }

        .header-btn {
            background: rgba(255, 255, 255, 0.2);
            width: 36px;
            height: 36px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: var(--transition);
            border: none;
            color: white;
            font-size: 1.1rem;
        }

        .header-btn:hover {
            background: rgba(255, 255, 255, 0.3);
            transform: scale(1.05);
        }

        /* Main container */
        .container {
            padding: 1rem;
            max-width: 1200px;
            margin: 0 auto;
        }

        .section {
            background: white;
            border-radius: 18px;
            box-shadow: var(--card-shadow);
            padding: 1.5rem;
            margin-bottom: 1.2rem;
            display: none;
            animation: fadeIn 0.4s ease;
            transition: var(--transition);
        }

        [data-theme="dark"] .section {
            background: #1e293b;
        }

        .section.active {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        h2 {
            font-size: 1.4rem;
            margin-bottom: 1.2rem;
            color: var(--darker);
            display: flex;
            align-items: center;
            gap: 8px;
        }

        [data-theme="dark"] h2 {
            color: var(--dark);
        }

        h2 i {
            color: var(--primary);
            background: #e0f2fe;
            width: 36px;
            height: 36px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: var(--transition);
            font-size: 1rem;
        }

        [data-theme="dark"] h2 i {
            background: rgba(67, 97, 238, 0.2);
        }

        .card {
            background: white;
            border-radius: 16px;
            padding: 1.2rem;
            box-shadow: var(--card-shadow);
            margin-bottom: 1.2rem;
            border: 1px solid #e2e8f0;
            transition: var(--transition);
        }

        [data-theme="dark"] .card {
            background: #1e293b;
            border-color: #334155;
        }

        .form-group {
            margin-bottom: 1rem;
        }

        label {
            display: block;
            margin-bottom: 0.4rem;
            font-weight: 500;
            color: var(--darker);
            font-size: 0.9rem;
        }

        [data-theme="dark"] label {
            color: var(--dark);
        }

        input, select, textarea {
            width: 100%;
            padding: 10px 12px;
            border: 1px solid #e2e8f0;
            border-radius: 10px;
            font-size: 0.95rem;
            transition: var(--transition);
            background: #f8fafc;
            color: var(--darker);
        }

        [data-theme="dark"] input,
        [data-theme="dark"] select,
        [data-theme="dark"] textarea {
            background: #0f172a;
            border-color: #334155;
            color: var(--dark);
        }

        input:focus, select:focus, textarea:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(67, 97, 238, 0.2);
            background: white;
        }

        [data-theme="dark"] input:focus,
        [data-theme="dark"] select:focus,
        [data-theme="dark"] textarea:focus {
            background: #0f172a;
        }

        button {
            background: var(--primary);
            color: white;
            border: none;
            padding: 10px 16px;
            border-radius: 10px;
            font-weight: 600;
            cursor: pointer;
            transition: var(--transition);
            font-size: 0.95rem;
            display: inline-flex;
            align-items: center;
            gap: 6px;
            box-shadow: 0 4px 6px rgba(67, 97, 238, 0.2);
        }

        button:hover {
            background: var(--secondary);
            transform: translateY(-2px);
            box-shadow: 0 6px 10px rgba(67, 97, 238, 0.3);
        }

        button.secondary {
            background: white;
            color: var(--primary);
            border: 1px solid var(--primary);
            box-shadow: none;
            padding: 8px 12px;
        }

        [data-theme="dark"] button.secondary {
            background: #1e293b;
        }

        button.danger {
            background: var(--danger);
            box-shadow: 0 4px 6px rgba(247, 37, 133, 0.2);
        }

        button.success {
            background: var(--success);
            box-shadow: 0 4px 6px rgba(74, 222, 128, 0.2);
        }

        button.small {
            padding: 6px 10px;
            font-size: 0.85rem;
        }

        /* Task styles */
        .task-item {
            display: flex;
            align-items: center;
            padding: 12px;
            border-bottom: 1px solid #f1f5f9;
            transition: var(--transition);
            border-radius: 10px;
            margin-bottom: 6px;
            background: white;
        }

        [data-theme="dark"] .task-item {
            background: #1e293b;
            border-color: #334155;
        }

        .task-item:last-child {
            border-bottom: none;
        }

        .task-item:hover {
            background: #f8fafc;
        }

        [data-theme="dark"] .task-item:hover {
            background: #2d3748;
        }

        .task-check {
            margin-right: 12px;
        }

        .task-content {
            flex: 1;
        }

        .task-title {
            font-weight: 500;
            margin-bottom: 4px;
            font-size: 0.95rem;
        }

        .task-time {
            font-size: 0.8rem;
            color: var(--gray);
        }

        .task-actions {
            display: flex;
            gap: 6px;
        }

        .priority-low {
            background: rgba(74, 222, 128, 0.1);
            border-left: 4px solid var(--success);
        }

        .priority-medium {
            background: rgba(245, 158, 11, 0.1);
            border-left: 4px solid var(--warning);
        }

        .priority-high {
            background: rgba(247, 37, 133, 0.1);
            border-left: 4px solid var(--danger);
        }

        .priority-badge {
            padding: 3px 8px;
            border-radius: 50px;
            font-size: 0.7rem;
            font-weight: 600;
            display: inline-block;
            margin-top: 4px;
        }

        .priority-low .priority-badge {
            background: rgba(74, 222, 128, 0.2);
            color: var(--success);
        }

        .priority-medium .priority-badge {
            background: rgba(245, 158, 11, 0.2);
            color: var(--warning);
        }

        .priority-high .priority-badge {
            background: rgba(247, 37, 133, 0.2);
            color: var(--danger);
        }

        .completed {
            opacity: 0.6;
        }

        /* Finance styles */
        .finance-summary {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(160px, 1fr));
            gap: 12px;
            margin-bottom: 1.2rem;
        }

        .summary-card {
            background: linear-gradient(to right, #f8fafc, #f1f5f9);
            border-radius: 14px;
            padding: 1rem;
            text-align: center;
            border: 1px solid #e2e8f0;
            transition: var(--transition);
        }

        [data-theme="dark"] .summary-card {
            background: linear-gradient(to right, #1e293b, #0f172a);
            border-color: #334155;
        }

        .summary-title {
            font-size: 0.85rem;
            color: var(--gray);
        }

        .summary-value {
            font-size: 1.5rem;
            font-weight: 800;
            margin: 8px 0;
            font-family: 'Courier New', monospace;
        }

        .positive {
            color: var(--success);
        }

        .negative {
            color: var(--danger);
        }

        .table-responsive {
            overflow-x: auto;
            -webkit-overflow-scrolling: touch;
            margin-top: 1rem;
        }

        .finance-table {
            width: 100%;
            border-collapse: collapse;
            min-width: 600px;
        }

        .finance-table th {
            text-align: left;
            padding: 10px 12px;
            background: #f1f5f9;
            font-weight: 600;
            color: var(--darker);
            border-bottom: 2px solid #e2e8f0;
            font-size: 0.85rem;
        }

        [data-theme="dark"] .finance-table th {
            background: #0f172a;
            color: var(--dark);
            border-color: #334155;
        }

        .finance-table td {
            padding: 10px 12px;
            border-bottom: 1px solid #e2e8f0;
            font-size: 0.9rem;
        }

        [data-theme="dark"] .finance-table td {
            border-color: #334155;
        }

        .finance-table tr:last-child td {
            border-bottom: none;
        }

        /* Workout styles */
        .muscle-groups {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(140px, 1fr));
            gap: 15px;
        }

        .muscle-card {
            background: white;
            border-radius: 14px;
            overflow: hidden;
            box-shadow: var(--card-shadow);
            transition: var(--transition);
            cursor: pointer;
            text-align: center;
            border: 1px solid #e2e8f0;
        }

        [data-theme="dark"] .muscle-card {
            background: #1e293b;
            border-color: #334155;
        }

        .muscle-card:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 15px rgba(0, 0, 0, 0.1);
        }

        .muscle-image {
            height: 100px;
            background: linear-gradient(to right, var(--primary-light), var(--primary));
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2.5rem;
            color: white;
        }

        .muscle-name {
            padding: 12px 8px;
            font-weight: 600;
            background: #f8fafc;
            font-size: 0.9rem;
        }

        [data-theme="dark"] .muscle-name {
            background: #0f172a;
        }

        /* Exercises section */
        .exercise-item {
            display: flex;
            align-items: center;
            padding: 12px;
            border-radius: 10px;
            margin-bottom: 8px;
            background: white;
            border: 1px solid #e2e8f0;
            gap: 10px;
        }

        [data-theme="dark"] .exercise-item {
            background: #1e293b;
            border-color: #334155;
        }

        .exercise-check {
            min-width: 22px;
        }

        .exercise-content {
            flex: 1;
        }

        .exercise-title {
            font-weight: 500;
            margin-bottom: 4px;
            font-size: 0.95rem;
        }

        .exercise-details {
            font-size: 0.85rem;
            color: var(--gray);
            display: flex;
            gap: 8px;
        }

        .exercise-actions {
            display: flex;
            gap: 6px;
        }

        .exercise-completed {
            opacity: 0.7;
            text-decoration: line-through;
        }

        /* Timer styles */
        .timer-container {
            text-align: center;
            padding: 1.5rem 1rem;
        }

        .timer-display {
            font-size: 2.8rem;
            font-weight: 800;
            font-family: 'Courier New', monospace;
            margin: 15px 0;
            color: var(--darker);
            background: #f8fafc;
            border-radius: 10px;
            padding: 12px;
            display: inline-block;
            min-width: 220px;
        }

        [data-theme="dark"] .timer-display {
            background: #0f172a;
            color: var(--dark);
        }

        .timer-controls {
            display: flex;
            justify-content: center;
            gap: 12px;
            margin-top: 15px;
            flex-wrap: wrap;
        }

        .timer-input {
            max-width: 280px;
            margin: 0 auto;
            display: flex;
            gap: 8px;
            margin-bottom: 15px;
        }

        .timer-input input {
            text-align: center;
            font-weight: 600;
        }

        /* Tips and empty states */
        .tips-container {
            margin-top: 1.2rem;
        }

        .tip-card {
            background: #e8f4fc;
            border-left: 4px solid var(--primary);
            padding: 1rem;
            border-radius: 0 10px 10px 0;
            margin-bottom: 0.8rem;
            font-size: 0.9rem;
        }

        [data-theme="dark"] .tip-card {
            background: rgba(67, 97, 238, 0.1);
        }

        .tip-title {
            font-weight: 600;
            margin-bottom: 6px;
            color: var(--primary);
            display: flex;
            align-items: center;
            gap: 6px;
            font-size: 0.95rem;
        }

        .empty-state {
            text-align: center;
            padding: 1.5rem;
            color: var(--gray);
            font-size: 0.9rem;
        }

        .empty-state i {
            font-size: 2.5rem;
            margin-bottom: 0.8rem;
            color: #cbd5e1;
        }

        /* Diet section */
        .diet-tabs {
            display: flex;
            gap: 8px;
            margin-bottom: 15px;
            border-bottom: 1px solid #e2e8f0;
            padding-bottom: 12px;
            flex-wrap: wrap;
        }

        .diet-tab {
            padding: 8px 15px;
            border-radius: 50px;
            background: #f1f5f9;
            cursor: pointer;
            transition: var(--transition);
            font-weight: 500;
            font-size: 0.9rem;
        }

        [data-theme="dark"] .diet-tab {
            background: #0f172a;
        }

        .diet-tab.active {
            background: var(--primary);
            color: white;
        }

        .meal-item {
            background: white;
            border-radius: 14px;
            padding: 1.2rem;
            margin-bottom: 1.2rem;
            box-shadow: var(--card-shadow);
            border-left: 4px solid var(--primary);
            font-size: 0.9rem;
        }

        [data-theme="dark"] .meal-item {
            background: #1e293b;
        }

        .meal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 12px;
        }

        .meal-title {
            font-size: 1.1rem;
            font-weight: 600;
        }

        .meal-time {
            color: var(--gray);
            font-size: 0.85rem;
        }

        /* Grocery list */
        .grocery-item {
            display: flex;
            align-items: center;
            padding: 10px 12px;
            border-radius: 10px;
            margin-bottom: 6px;
            background: white;
            border: 1px solid #e2e8f0;
        }

        [data-theme="dark"] .grocery-item {
            background: #1e293b;
            border-color: #334155;
        }

        .grocery-check {
            margin-right: 12px;
        }

        .grocery-content {
            flex: 1;
        }

        .grocery-title {
            font-weight: 500;
            font-size: 0.95rem;
        }

        .grocery-quantity {
            font-size: 0.8rem;
            color: var(--gray);
        }

        .grocery-actions {
            display: flex;
            gap: 6px;
        }

        .grocery-purchased {
            opacity: 0.6;
            text-decoration: line-through;
        }

        /* Footer */
        footer {
            background: white;
            padding: 0.8rem 1rem;
            text-align: center;
            color: var(--gray);
            font-size: 0.75rem;
            position: fixed;
            bottom: 0;
            width: 100%;
            box-shadow: 0 -2px 12px rgba(0, 0, 0, 0.05);
            border-top: 1px solid #e2e8f0;
            transition: var(--transition);
        }

        [data-theme="dark"] footer {
            background: #1e293b;
            border-color: #334155;
        }

        /* Notification */
        .notification {
            position: fixed;
            top: 15px;
            right: 15px;
            background: white;
            color: var(--success);
            padding: 12px 20px;
            border-radius: 10px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
            display: flex;
            align-items: center;
            gap: 8px;
            font-weight: 500;
            z-index: 1000;
            transform: translateX(200%);
            transition: transform 0.3s ease;
            font-size: 0.9rem;
        }

        .notification.show {
            transform: translateX(0);
        }

        /* Modal */
        .modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 2000;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.3s ease;
        }

        .modal.show {
            opacity: 1;
            pointer-events: all;
        }

        .modal-content {
            background: white;
            border-radius: 18px;
            padding: 1.8rem;
            max-width: 500px;
            width: 90%;
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.2);
            transform: translateY(20px);
            transition: transform 0.3s ease;
        }

        [data-theme="dark"] .modal-content {
            background: #1e293b;
        }

        .modal.show .modal-content {
            transform: translateY(0);
        }

        .modal-title {
            font-size: 1.4rem;
            margin-bottom: 1.2rem;
            color: var(--darker);
        }

        [data-theme="dark"] .modal-title {
            color: var(--dark);
        }

        .modal-actions {
            display: flex;
            gap: 12px;
            margin-top: 1.5rem;
            justify-content: flex-end;
        }

        /* Tutorial page */
        .tutorial-step {
            margin-bottom: 1.5rem;
            padding: 1.2rem;
            border-radius: 14px;
            background: #f1f5f9;
            border-left: 4px solid var(--primary);
            font-size: 0.9rem;
        }

        [data-theme="dark"] .tutorial-step {
            background: rgba(67, 97, 238, 0.1);
        }

        .tutorial-step h3 {
            margin-bottom: 0.8rem;
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 1.1rem;
        }

        .tutorial-step i {
            color: var(--primary);
            font-size: 1.3rem;
        }

        /* Reports */
        .chart-container {
            height: 280px;
            margin-bottom: 1.5rem;
        }

        /* Settings */
        .settings-option {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 12px 0;
            border-bottom: 1px solid #e2e8f0;
        }

        [data-theme="dark"] .settings-option {
            border-color: #334155;
        }

        .settings-option:last-child {
            border-bottom: none;
        }

        .switch {
            position: relative;
            display: inline-block;
            width: 54px;
            height: 30px;
        }

        .switch input {
            opacity: 0;
            width: 0;
            height: 0;
        }

        .slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: #ccc;
            transition: .4s;
            border-radius: 30px;
        }

        .slider:before {
            position: absolute;
            content: "";
            height: 22px;
            width: 22px;
            left: 4px;
            bottom: 4px;
            background-color: white;
            transition: .4s;
            border-radius: 50%;
        }

        input:checked + .slider {
            background-color: var(--primary);
        }

        input:checked + .slider:before {
            transform: translateX(24px);
        }
        
        /* Novo estilo para o bot√£o de visibilidade */
        .visibility-toggle {
            background: transparent;
            border: none;
            color: var(--darker);
            cursor: pointer;
            font-size: 1.2rem;
            margin-left: 10px;
            transition: var(--transition);
        }
        
        [data-theme="dark"] .visibility-toggle {
            color: var(--dark);
        }

        /* Responsive */
        @media (max-width: 768px) {
            .container {
                padding: 0.8rem;
            }
            .section {
                padding: 1.2rem;
                border-radius: 16px;
            }
            .timer-display {
                font-size: 2.2rem;
                min-width: 180px;
            }
            .finance-summary {
                grid-template-columns: 1fr 1fr;
            }
            .muscle-groups {
                grid-template-columns: repeat(auto-fill, minmax(120px, 1fr));
                gap: 12px;
            }
            .tabs {
                min-width: max-content;
            }
        }

        @media (max-width: 480px) {
            .finance-summary {
                grid-template-columns: 1fr;
            }
            .timer-controls {
                flex-direction: column;
                align-items: center;
            }
            .timer-controls button {
                width: 100%;
                max-width: 220px;
            }
            .modal-actions {
                flex-direction: column;
            }
            .modal-actions button {
                width: 100%;
            }
            .header-actions {
                gap: 8px;
            }
            .logo {
                font-size: 1.3rem;
            }
            .tab {
                min-width: 80px;
                font-size: 0.8rem;
            }
        }
    </style>
</head>
<body>
    <!-- Cookie Consent Modal -->
    <div class="modal" id="cookieModal">
        <div class="modal-content">
            <h3 class="modal-title">Uso de Cookies</h3>
            <p>O OrganizeDay usa cookies para salvar suas tarefas, finan√ßas, treinos, dieta e lista de compras no seu dispositivo por at√© 12 meses. Nada sai do seu aparelho, garantindo total privacidade. Por favor, autorize os cookies para usar o app.</p>
            <div class="modal-actions">
                <button class="secondary" id="rejectCookies">Recusar</button>
                <button id="acceptCookies">Autorizar Cookies</button>
            </div>
        </div>
    </div>

    <!-- Clear Tasks Modal -->
    <div class="modal" id="clearTasksModal">
        <div class="modal-content">
            <h3 class="modal-title">Limpar Tarefas</h3>
            <p>Voc√™ est√° prestes a excluir todas as tarefas. Esta a√ß√£o n√£o pode ser desfeita. Deseja continuar?</p>
            <div class="modal-actions">
                <button class="secondary" id="cancelClearTasks">Cancelar</button>
                <button class="danger" id="confirmClearTasks">Excluir Tudo</button>
            </div>
        </div>
    </div>

    <!-- Clear Finances Modal -->
    <div class="modal" id="clearFinancesModal">
        <div class="modal-content">
            <h3 class="modal-title">Limpar Finan√ßas</h3>
            <p>Voc√™ est√° prestes a excluir todas as finan√ßas. Esta a√ß√£o n√£o pode ser desfeita. Deseja continuar?</p>
            <div class="modal-actions">
                <button class="secondary" id="cancelClearFinances">Cancelar</button>
                <button class="danger" id="confirmClearFinances">Excluir Tudo</button>
            </div>
        </div>
    </div>

    <!-- Clear Grocery Modal -->
    <div class="modal" id="clearGroceryModal">
        <div class="modal-content">
            <h3 class="modal-title">Limpar Lista de Compras</h3>
            <p>Voc√™ est√° prestes a excluir todos os itens da lista de compras. Deseja continuar?</p>
            <div class="modal-actions">
                <button class="secondary" id="cancelClearGrocery">Cancelar</button>
                <button class="danger" id="confirmClearGrocery">Excluir Tudo</button>
            </div>
        </div>
    </div>

    <header>
        <div class="header-content">
            <div class="logo-container">
                <div class="logo-icon">
                    <i class="fas fa-calendar-day"></i>
                </div>
                <div class="logo">OrganizeDay</div>
            </div>
            
            <div class="header-actions">
                <button class="header-btn" id="tutorialBtn">
                    <i class="fas fa-question"></i>
                </button>
                <button class="header-btn" id="themeToggle">
                    <i class="fas fa-moon"></i>
                </button>
            </div>
            
            <div class="tabs-container">
                <div class="tabs">
                    <div class="tab active" data-tab="tasks">
                        <i class="fas fa-tasks"></i> Tarefas
                    </div>
                    <div class="tab" data-tab="finance">
                        <i class="fas fa-money-bill-wave"></i> Finan√ßas
                    </div>
                    <div class="tab" data-tab="workout">
                        <i class="fas fa-dumbbell"></i> Treino
                    </div>
                    <div class="tab" data-tab="diet">
                        <i class="fas fa-utensils"></i> Dieta
                    </div>
                    <div class="tab" data-tab="reports">
                        <i class="fas fa-chart-bar"></i> Relat√≥rios
                    </div>
                    <div class="tab" data-tab="settings">
                        <i class="fas fa-cog"></i> Configura√ß√µes
                    </div>
                </div>
            </div>
        </div>
    </header>

    <div class="container">
        <!-- Se√ß√£o de Tarefas -->
        <section id="tasks" class="section active">
            <h2><i class="fas fa-list-check"></i> Tarefas do Dia</h2>
            
            <div class="card">
                <div class="form-group">
                    <label for="taskInput">Adicionar nova tarefa</label>
                    <div style="display: flex; gap: 8px;">
                        <input type="text" id="taskInput" placeholder="O que precisa ser feito?">
                        <button id="addTaskBtn"><i class="fas fa-plus"></i> Adicionar</button>
                    </div>
                </div>
                
                <div class="form-group" style="display: grid; grid-template-columns: 1fr 1fr; gap: 8px;">
                    <div>
                        <label for="taskPriority">Prioridade</label>
                        <select id="taskPriority">
                            <option value="low">Baixa</option>
                            <option value="medium">M√©dia</option>
                            <option value="high">Alta</option>
                        </select>
                    </div>
                    <div>
                        <label for="taskDate">Data</label>
                        <input type="date" id="taskDate">
                    </div>
                </div>
            </div>
            
            <div class="card">
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 12px;">
                    <h3>Minhas Tarefas</h3>
                    <div>
                        <button class="secondary small" id="clearTasksBtn"><i class="fas fa-trash"></i> Limpar Tudo</button>
                    </div>
                </div>
                
                <div id="tasksList">
                    <div class="empty-state">
                        <i class="fas fa-clipboard-list"></i>
                        <h3>Nenhuma tarefa adicionada</h3>
                        <p>Comece adicionando suas tarefas di√°rias</p>
                    </div>
                </div>
            </div>
        </section>
        
        <!-- Se√ß√£o de Finan√ßas -->
        <section id="finance" class="section">
            <h2>
                <i class="fas fa-chart-pie"></i> Gest√£o Financeira
                <button id="toggleVisibility" class="visibility-toggle">
                    <i class="fas fa-eye"></i>
                </button>
            </h2>
            
            <div class="finance-summary">
                <div class="summary-card">
                    <div class="summary-title">Saldo Dispon√≠vel</div>
                    <div class="summary-value" id="balanceValue">R$ 0,00</div>
                    <div class="summary-title">Atualizado hoje</div>
                </div>
                <div class="summary-card">
                    <div class="summary-title">Receitas</div>
                    <div class="summary-value positive" id="incomeValue">R$ 0,00</div>
                    <div class="summary-title">Este m√™s</div>
                </div>
                <div class="summary-card">
                    <div class="summary-title">Despesas</div>
                    <div class="summary-value negative" id="expenseValue">R$ 0,00</div>
                    <div class="summary-title">Este m√™s</div>
                </div>
                <div class="summary-card">
                    <div class="summary-title">Economias</div>
                    <div class="summary-value" id="savingsValue">0%</div>
                    <div class="summary-title">Meta: 20%</div>
                </div>
            </div>
            
            <div class="card">
                <h3>Adicionar Transa√ß√£o</h3>
                <div class="form-group">
                    <label for="transactionType">Tipo</label>
                    <select id="transactionType">
                        <option value="income">Receita</option>
                        <option value="expense">Despesa</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label for="transactionName">Descri√ß√£o</label>
                    <input type="text" id="transactionName" placeholder="Sal√°rio, Aluguel, Mercado...">
                </div>
                
                <div class="form-group">
                    <label for="transactionAmount">Valor (R$)</label>
                    <input type="number" id="transactionAmount" placeholder="0,00" step="0.01" min="0">
                </div>
                
                <div class="form-group">
                    <label for="transactionCategory">Categoria</label>
                    <select id="transactionCategory">
                        <option value="salary">Sal√°rio</option>
                        <option value="rent">Moradia</option>
                        <option value="food">Alimenta√ß√£o</option>
                        <option value="transport">Transporte</option>
                        <option value="health">Sa√∫de</option>
                        <option value="leisure">Lazer</option>
                        <option value="other">Outro</option>
                    </select>
                </div>
                
                <button id="addTransactionBtn"><i class="fas fa-plus"></i> Adicionar Transa√ß√£o</button>
            </div>
            
            <div class="card">
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 12px;">
                    <h3>Transa√ß√µes Recentes</h3>
                    <div>
                        <button class="secondary small" id="clearFinancesBtn"><i class="fas fa-trash"></i> Limpar Tudo</button>
                    </div>
                </div>
                
                <div class="table-responsive">
                    <table class="finance-table">
                        <thead>
                            <tr>
                                <th>Descri√ß√£o</th>
                                <th>Categoria</th>
                                <th>Data</th>
                                <th>Valor</th>
                                <th>A√ß√µes</th>
                            </tr>
                        </thead>
                        <tbody id="transactionsList">
                            <tr>
                                <td colspan="5">
                                    <div class="empty-state" style="padding: 20px 0;">
                                        <i class="fas fa-receipt"></i>
                                        <h3>Nenhuma transa√ß√£o registrada</h3>
                                        <p>Adicione suas receitas e despesas para come√ßar</p>
                                    </div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
            
            <div class="tips-container">
                <h3><i class="fas fa-lightbulb"></i> Dicas Financeiras</h3>
                <div class="tip-card">
                    <div class="tip-title"><i class="fas fa-piggy-bank"></i> Economize 20% do seu sal√°rio</div>
                    <div>Tente separar pelo menos 20% da sua renda para poupan√ßa ou investimentos antes de pagar outras contas.</div>
                </div>
                <div class="tip-card">
                    <div class="tip-title"><i class="fas fa-chart-line"></i> Planejamento de gastos</div>
                    <div>Crie categorias para seus gastos e estabele√ßa limites mensais para cada uma delas.</div>
                </div>
            </div>
        </section>
        
        <!-- Se√ß√£o de Treino -->
        <section id="workout" class="section">
            <h2><i class="fas fa-running"></i> Treino e Muscula√ß√£o</h2>
            
            <div class="muscle-groups">
                <div class="muscle-card" data-muscle="chest">
                    <div class="muscle-image">
                        <i class="fas fa-user"></i>
                    </div>
                    <div class="muscle-name">Peito</div>
                </div>
                <div class="muscle-card" data-muscle="back">
                    <div class="muscle-image">
                        <i class="fas fa-user"></i>
                    </div>
                    <div class="muscle-name">Costas</div>
                </div>
                <div class="muscle-card" data-muscle="legs">
                    <div class="muscle-image">
                        <i class="fas fa-user"></i>
                    </div>
                    <div class="muscle-name">Pernas</div>
                </div>
                <div class="muscle-card" data-muscle="shoulders">
                    <div class="muscle-image">
                        <i class="fas fa-user"></i>
                    </div>
                    <div class="muscle-name">Ombros</div>
                </div>
                <div class="muscle-card" data-muscle="biceps">
                    <div class="muscle-image">
                        <i class="fas fa-user"></i>
                    </div>
                    <div class="muscle-name">Bra√ßos</div>
                </div>
                <div class="muscle-card" data-muscle="triceps">
                    <div class="muscle-image">
                        <i class="fas fa-user"></i>
                    </div>
                    <div class="muscle-name">Abd√¥men/Lombar</div>
                </div>
            </div>
            
            <div class="card">
                <h3>Cron√¥metro de Treino</h3>
                <div class="timer-container">
                    <div class="timer-display" id="timerDisplay">00:00:00</div>
                    <div class="timer-input">
                        <input type="number" id="minutesInput" placeholder="Min" min="0" max="59" value="0">
                        <input type="number" id="secondsInput" placeholder="Seg" min="0" max="59" value="0">
                    </div>
                    <div class="timer-controls">
                        <button id="startTimerBtn"><i class="fas fa-play"></i> Iniciar</button>
                        <button id="pauseTimerBtn"><i class="fas fa-pause"></i> Pausar</button>
                        <button id="resetTimerBtn"><i class="fas fa-redo"></i> Reiniciar</button>
                    </div>
                </div>
            </div>
            
            <!-- Se√ß√£o de Exerc√≠cios (inicialmente oculta) -->
            <div id="exercises-section" style="display: none;">
                <div class="card">
                    <button id="backToWorkoutBtn" class="secondary"><i class="fas fa-arrow-left"></i> Voltar</button>
                    <h3 id="muscle-group-title">Exerc√≠cios para <span id="muscle-group-name"></span></h3>
                    
                    <div class="form-group">
                        <label for="exerciseName">Nome do Exerc√≠cio</label>
                        <input type="text" id="exerciseName" placeholder="Ex: Supino reto, Rosca direta...">
                    </div>
                    
                    <div class="form-group">
                        <label for="exerciseSets">S√©ries</label>
                        <input type="number" id="exerciseSets" placeholder="N√∫mero de s√©ries">
                    </div>
                    
                    <div class="form-group">
                        <label for="exerciseReps">Repeti√ß√µes</label>
                        <input type="text" id="exerciseReps" placeholder="Ex: 10-12, 8-10...">
                    </div>
                    
                    <button id="addExerciseBtn"><i class="fas fa-plus"></i> Adicionar Exerc√≠cio</button>
                </div>
                
                <div class="card">
                    <h3>Lista de Exerc√≠cios</h3>
                    <div id="exercisesList">
                        <div class="empty-state">
                            <i class="fas fa-dumbbell"></i>
                            <h3>Nenhum exerc√≠cio adicionado</h3>
                            <p>Adicione exerc√≠cios para este grupo muscular</p>
                        </div>
                    </div>
                </div>
            </div>
        </section>
        
        <!-- Se√ß√£o de Dieta e Compras -->
        <section id="diet" class="section">
            <h2><i class="fas fa-utensils"></i> Dieta e Lista de Compras</h2>
            
            <div class="diet-tabs">
                <div class="diet-tab active" data-diet-tab="meals">Plano de Refei√ß√µes</div>
                <div class="diet-tab" data-diet-tab="grocery">Lista de Compras</div>
            </div>
            
            <div id="mealsSection">
                <div class="card">
                    <h3>Adicionar Refei√ß√£o</h3>
                    <div class="form-group">
                        <label for="mealName">Nome da Refei√ß√£o</label>
                        <input type="text" id="mealName" placeholder="Caf√© da manh√£, Almo√ßo, Jantar...">
                    </div>
                    
                    <div class="form-group">
                        <label for="mealTime">Hor√°rio</label>
                        <input type="time" id="mealTime">
                    </div>
                    
                    <div class="form-group">
                        <label for="mealIngredients">Ingredientes</label>
                        <textarea id="mealIngredients" placeholder="Liste os ingredientes necess√°rios..." rows="3"></textarea>
                    </div>
                    
                    <div class="form-group">
                        <label for="mealCalories">Calorias (opcional)</label>
                        <input type="number" id="mealCalories" placeholder="Calorias estimadas">
                    </div>
                    
                    <button id="addMealBtn"><i class="fas fa-plus"></i> Adicionar Refei√ß√£o</button>
                </div>
                
                <div class="card">
                    <h3>Minhas Refei√ß√µes</h3>
                    <div id="mealsList">
                        <div class="empty-state">
                            <i class="fas fa-utensils"></i>
                            <h3>Nenhuma refei√ß√£o planejada</h3>
                            <p>Adicione suas refei√ß√µes para come√ßar</p>
                        </div>
                    </div>
                </div>
            </div>
            
            <div id="grocerySection" style="display: none;">
                <div class="card">
                    <h3>Adicionar Item √† Lista de Compras</h3>
                    <div class="form-group">
                        <label for="groceryItem">Item</label>
                        <input type="text" id="groceryItem" placeholder="O que voc√™ precisa comprar?">
                    </div>
                    
                    <div class="form-group">
                        <label for="groceryQuantity">Quantidade</label>
                        <input type="text" id="groceryQuantity" placeholder="Ex: 1kg, 2 unidades...">
                    </div>
                    
                    <div class="form-group">
                        <label for="groceryCategory">Categoria (opcional)</label>
                        <input type="text" id="groceryCategory" placeholder="Ex: Hortifruti, Mercearia...">
                    </div>
                    
                    <button id="addGroceryBtn"><i class="fas fa-plus"></i> Adicionar Item</button>
                </div>
                
                <div class="card">
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 12px;">
                        <h3>Lista de Compras</h3>
                        <div>
                            <button class="secondary small" id="clearGroceryBtn"><i class="fas fa-trash"></i> Limpar Tudo</button>
                        </div>
                    </div>
                    
                    <div id="groceryList">
                        <div class="empty-state">
                            <i class="fas fa-shopping-cart"></i>
                            <h3>Sua lista de compras est√° vazia</h3>
                            <p>Adicione itens √† sua lista de compras</p>
                        </div>
                    </div>
                </div>
            </div>
        </section>
        
        <!-- Se√ß√£o de Relat√≥rios -->
        <section id="reports" class="section">
            <h2><i class="fas fa-chart-bar"></i> Relat√≥rios e Estat√≠sticas</h2>
            
            <div class="card">
                <h3>Desempenho de Tarefas</h3>
                <div class="chart-container">
                    <canvas id="tasksChart"></canvas>
                </div>
            </div>
            
            <div class="card">
                <h3>Gastos por Categoria</h3>
                <div class="chart-container">
                    <canvas id="expensesChart"></canvas>
                </div>
            </div>
            
            <div class="card">
                <h3>Exportar Dados</h3>
                <p>Exporte todos os seus dados para backup ou an√°lise externa.</p>
                <button class="secondary" id="exportDataBtn"><i class="fas fa-download"></i> Exportar Dados</button>
            </div>
        </section>
        
        <!-- Se√ß√£o de Configura√ß√µes -->
        <section id="settings" class="section">
            <h2><i class="fas fa-cog"></i> Configura√ß√µes</h2>
            
            <div class="card">
                <div class="settings-option">
                    <div>
                        <h3>Modo Escuro</h3>
                        <p>Ative o modo escuro para melhor experi√™ncia visual</p>
                    </div>
                    <label class="switch">
                        <input type="checkbox" id="darkModeToggle">
                        <span class="slider"></span>
                    </label>
                </div>
                
                <div class="settings-option">
                    <div>
                        <h3>Notifica√ß√µes</h3>
                        <p>Receba lembretes para tarefas pendentes</p>
                    </div>
                    <label class="switch">
                        <input type="checkbox" id="notificationsToggle" checked>
                        <span class="slider"></span>
                    </label>
                </div>
                
                <div class="settings-option">
                    <div>
                        <h3>Efeitos Sonoros</h3>
                        <p>Ative sons ao completar tarefas</p>
                    </div>
                    <label class="switch">
                        <input type="checkbox" id="soundsToggle" checked>
                        <span class="slider"></span>
                    </label>
                </div>
            </div>
            
            <div class="card">
                <h3>Gerenciamento de Dados</h3>
                <div class="settings-option">
                    <div>
                        <h3>Exportar Dados</h3>
                        <p>Salve uma c√≥pia de todos os seus dados</p>
                    </div>
                    <button class="secondary small" id="exportAllDataBtn"><i class="fas fa-download"></i> Exportar</button>
                </div>
                
                <div class="settings-option">
                    <div>
                        <h3>Importar Dados</h3>
                        <p>Restaurar dados de um backup</p>
                    </div>
                    <button class="secondary small" id="importDataBtn"><i class="fas fa-upload"></i> Importar</button>
                </div>
                
                <div class="settings-option">
                    <div>
                        <h3>Limpar Todos os Dados</h3>
                        <p>Excluir permanentemente todas as informa√ß√µes</p>
                    </div>
                    <button class="danger small" id="resetAllDataBtn"><i class="fas fa-trash"></i> Limpar Tudo</button>
                </div>
            </div>
            
            <div class="card">
                <h3>Sobre o OrganizeDay</h3>
                <p>Vers√£o: 1.1.0</p>
                <p>Desenvolvido para ajudar voc√™ a organizar seu dia com efici√™ncia.</p>
                <p>Todos os dados s√£o armazenados localmente no seu dispositivo por at√© 12 meses.</p>
            </div>
        </section>
        
        <!-- Tutorial Section -->
        <section id="tutorial" class="section">
            <h2><i class="fas fa-book"></i> Como usar o OrganizeDay</h2>
            
            <div class="card">
                <div class="tutorial-step">
                    <h3><i class="fas fa-tasks"></i> Gerenciando Tarefas</h3>
                    <p>1. Adicione novas tarefas com t√≠tulo, prioridade e data.</p>
                    <p>2. Marque as tarefas como conclu√≠das quando termin√°-las.</p>
                    <p>3. Use os filtros para ver tarefas pendentes, conclu√≠das ou de hoje.</p>
                    <p>4. Voc√™ pode editar ou excluir tarefas a qualquer momento.</p>
                </div>
                
                <div class="tutorial-step">
                    <h3><i class="fas fa-money-bill-wave"></i> Controlando Finan√ßas</h3>
                    <p>1. Registre suas receitas e despesas com categoria e valor.</p>
                    <p>2. Acompanhe seu saldo e gastos por categoria no resumo.</p>
                    <p>3. Utilize as dicas financeiras para melhorar seus h√°bitos.</p>
                    <p>4. Exporte seus dados financeiros para an√°lise.</p>
                </div>
                
                <div class="tutorial-step">
                    <h3><i class="fas fa-dumbbell"></i> Planejando Treinos</h3>
                    <p>1. Selecione grupos musculares para planejar seus exerc√≠cios.</p>
                    <p>2. Use o cron√¥metro para controlar o tempo de treino.</p>
                    <p>3. Registre s√©ries, repeti√ß√µes e pesos para acompanhar progresso.</p>
                </div>
                
                <div class="tutorial-step">
                    <h3><i class="fas fa-shopping-cart"></i> Dieta e Lista de Compras</h3>
                    <p>1. Planeje suas refei√ß√µes com hor√°rios e ingredientes.</p>
                    <p>2. Adicione automaticamente ingredientes √† lista de compras.</p>
                    <p>3. Marque itens como comprados conforme voc√™ os adquire.</p>
                    <p>4. Organize sua lista de compras por categorias.</p>
                </div>
                
                <div class="tutorial-step">
                    <h3><i class="fas fa-chart-bar"></i> Relat√≥rios e Estat√≠sticas</h3>
                    <p>1. Visualize gr√°ficos de desempenho de tarefas.</p>
                    <p>2. Analise seus gastos por categoria.</p>
                    <p>3. Exporte todos os seus dados para backup.</p>
                </div>
                
                <div style="text-align: center; margin-top: 20px;">
                    <button id="backToAppBtn"><i class="fas fa-arrow-left"></i> Voltar ao Aplicativo</button>
                </div>
            </div>
        </section>
    </div>

    <div class="notification" id="notification">
        <i class="fas fa-check-circle"></i>
        <span id="notificationText">Opera√ß√£o realizada com sucesso!</span>
    </div>

    <footer>
        <div>OrganizeDay ¬© 2025 - Dados armazenados localmente por at√© 12 meses - gahsouza.com.br</div>
    </footer>

    <script>
        // Constants and configuration
        const COOKIE_EXPIRATION = 365; // days
        const DATA_KEYS = {
            TASKS: 'organizeDay_tasks',
            FINANCES: 'organizeDay_finances',
            WORKOUTS: 'organizeDay_workouts',
            DIET: 'organizeDay_diet',
            GROCERY: 'organizeDay_grocery',
            SETTINGS: 'organizeDay_settings',
            COOKIE_CONSENT: 'organizeDay_cookieConsent',
            TUTORIAL_VIEWED: 'organizeDay_tutorialViewed',
            SHOW_VALUES: 'organizeDay_showValues'
        };
        
        // State management
        let appState = {
            tasks: [],
            finances: [],
            workouts: {
                chest: [],
                back: [],
                legs: [],
                shoulders: [],
                biceps: [],
                triceps: []
            },
            diet: [],
            grocery: [],
            settings: {
                darkMode: false,
                notifications: true,
                sounds: true,
                showValues: true
            },
            currentSection: 'tasks',
            currentMuscleGroup: null
        };
        
        // DOM Elements
        const dom = {
            // Sections
            sections: document.querySelectorAll('.section'),
            tabs: document.querySelectorAll('.tab'),
            
            // Task elements
            taskInput: document.getElementById('taskInput'),
            taskPriority: document.getElementById('taskPriority'),
            taskDate: document.getElementById('taskDate'),
            addTaskBtn: document.getElementById('addTaskBtn'),
            tasksList: document.getElementById('tasksList'),
            clearTasksBtn: document.getElementById('clearTasksBtn'),
            
            // Finance elements
            transactionType: document.getElementById('transactionType'),
            transactionName: document.getElementById('transactionName'),
            transactionAmount: document.getElementById('transactionAmount'),
            transactionCategory: document.getElementById('transactionCategory'),
            addTransactionBtn: document.getElementById('addTransactionBtn'),
            transactionsList: document.getElementById('transactionsList'),
            balanceValue: document.getElementById('balanceValue'),
            incomeValue: document.getElementById('incomeValue'),
            expenseValue: document.getElementById('expenseValue'),
            savingsValue: document.getElementById('savingsValue'),
            clearFinancesBtn: document.getElementById('clearFinancesBtn'),
            toggleVisibility: document.getElementById('toggleVisibility'),
            
            // Workout elements
            startTimerBtn: document.getElementById('startTimerBtn'),
            pauseTimerBtn: document.getElementById('pauseTimerBtn'),
            resetTimerBtn: document.getElementById('resetTimerBtn'),
            timerDisplay: document.getElementById('timerDisplay'),
            minutesInput: document.getElementById('minutesInput'),
            secondsInput: document.getElementById('secondsInput'),
            exercisesSection: document.getElementById('exercises-section'),
            backToWorkoutBtn: document.getElementById('backToWorkoutBtn'),
            muscleGroupName: document.getElementById('muscle-group-name'),
            exerciseName: document.getElementById('exerciseName'),
            exerciseSets: document.getElementById('exerciseSets'),
            exerciseReps: document.getElementById('exerciseReps'),
            addExerciseBtn: document.getElementById('addExerciseBtn'),
            exercisesList: document.getElementById('exercisesList'),
            
            // Diet elements
            dietTabs: document.querySelectorAll('.diet-tab'),
            mealsSection: document.getElementById('mealsSection'),
            grocerySection: document.getElementById('grocerySection'),
            mealName: document.getElementById('mealName'),
            mealTime: document.getElementById('mealTime'),
            mealIngredients: document.getElementById('mealIngredients'),
            mealCalories: document.getElementById('mealCalories'),
            addMealBtn: document.getElementById('addMealBtn'),
            mealsList: document.getElementById('mealsList'),
            groceryItem: document.getElementById('groceryItem'),
            groceryQuantity: document.getElementById('groceryQuantity'),
            groceryCategory: document.getElementById('groceryCategory'),
            addGroceryBtn: document.getElementById('addGroceryBtn'),
            groceryList: document.getElementById('groceryList'),
            clearGroceryBtn: document.getElementById('clearGroceryBtn'),
            
            // Reports elements
            tasksChart: document.getElementById('tasksChart'),
            expensesChart: document.getElementById('expensesChart'),
            exportDataBtn: document.getElementById('exportDataBtn'),
            
            // Settings elements
            darkModeToggle: document.getElementById('darkModeToggle'),
            notificationsToggle: document.getElementById('notificationsToggle'),
            soundsToggle: document.getElementById('soundsToggle'),
            exportAllDataBtn: document.getElementById('exportAllDataBtn'),
            importDataBtn: document.getElementById('importDataBtn'),
            resetAllDataBtn: document.getElementById('resetAllDataBtn'),
            
            // Tutorial elements
            tutorialBtn: document.getElementById('tutorialBtn'),
            tutorialSection: document.getElementById('tutorial'),
            backToAppBtn: document.getElementById('backToAppBtn'),
            
            // Theme toggle
            themeToggle: document.getElementById('themeToggle'),
            
            // Notification
            notification: document.getElementById('notification'),
            notificationText: document.getElementById('notificationText'),
            
            // Modals
            cookieModal: document.getElementById('cookieModal'),
            acceptCookies: document.getElementById('acceptCookies'),
            rejectCookies: document.getElementById('rejectCookies'),
            clearTasksModal: document.getElementById('clearTasksModal'),
            cancelClearTasks: document.getElementById('cancelClearTasks'),
            confirmClearTasks: document.getElementById('confirmClearTasks'),
            clearFinancesModal: document.getElementById('clearFinancesModal'),
            cancelClearFinances: document.getElementById('cancelClearFinances'),
            confirmClearFinances: document.getElementById('confirmClearFinances'),
            clearGroceryModal: document.getElementById('clearGroceryModal'),
            cancelClearGrocery: document.getElementById('cancelClearGrocery'),
            confirmClearGrocery: document.getElementById('confirmClearGrocery')
        };
        
        // Initialize the application
        function initApp() {
            // Check cookie consent
            checkCookieConsent();
            
            // Load data from cookies
            loadAppData();
            
            // Setup event listeners
            setupEventListeners();
            
            // Render initial data
            renderTasks();
            renderTransactions();
            calculateFinances();
            renderDiet();
            renderGrocery();
            
            // Set up timer
            updateTimerDisplay();
            
            // Set initial theme
            updateTheme();
            
            // Update visibility icon
            updateVisibilityIcon();
            
            // Show tutorial if not viewed
            if (!appState.settings.tutorialViewed) {
                showTutorial();
            }
            
            // Initialize charts
            initCharts();
        }
        
        // Cookie consent management
        function checkCookieConsent() {
            const consent = Cookies.get(DATA_KEYS.COOKIE_CONSENT);
            if (consent === 'true') {
                // Cookies accepted
                return;
            } else if (consent === 'false') {
                // Cookies rejected
                showNotification('Ative os cookies no seu navegador para salvar seus dados.');
                return;
            }
            
            // Show cookie consent modal
            dom.cookieModal.classList.add('show');
        }
        
        // Data management functions
        function loadAppData() {
            // Load settings
            const savedSettings = Cookies.get(DATA_KEYS.SETTINGS);
            if (savedSettings) {
                appState.settings = JSON.parse(savedSettings);
            }
            
            // Load visibility preference
            const savedShowValues = Cookies.get(DATA_KEYS.SHOW_VALUES);
            if (savedShowValues !== undefined) {
                appState.settings.showValues = savedShowValues === 'true';
            }
            
            // Load tasks
            const savedTasks = Cookies.get(DATA_KEYS.TASKS);
            if (savedTasks) {
                appState.tasks = JSON.parse(savedTasks);
            }
            
            // Load finances
            const savedFinances = Cookies.get(DATA_KEYS.FINANCES);
            if (savedFinances) {
                appState.finances = JSON.parse(savedFinances);
            }
            
            // Load workouts
            const savedWorkouts = Cookies.get(DATA_KEYS.WORKOUTS);
            if (savedWorkouts) {
                appState.workouts = JSON.parse(savedWorkouts);
            }
            
            // Load diet
            const savedDiet = Cookies.get(DATA_KEYS.DIET);
            if (savedDiet) {
                appState.diet = JSON.parse(savedDiet);
            }
            
            // Load grocery
            const savedGrocery = Cookies.get(DATA_KEYS.GROCERY);
            if (savedGrocery) {
                appState.grocery = JSON.parse(savedGrocery);
            }
            
            // Load tutorial viewed status
            const tutorialViewed = Cookies.get(DATA_KEYS.TUTORIAL_VIEWED);
            if (tutorialViewed) {
                appState.settings.tutorialViewed = tutorialViewed === 'true';
            }
        }
        
        function saveAppData() {
            // Save settings
            Cookies.set(DATA_KEYS.SETTINGS, JSON.stringify(appState.settings), { expires: COOKIE_EXPIRATION });
            
            // Save visibility preference
            Cookies.set(DATA_KEYS.SHOW_VALUES, appState.settings.showValues.toString(), { expires: COOKIE_EXPIRATION });
            
            // Save tasks
            Cookies.set(DATA_KEYS.TASKS, JSON.stringify(appState.tasks), { expires: COOKIE_EXPIRATION });
            
            // Save finances
            Cookies.set(DATA_KEYS.FINANCES, JSON.stringify(appState.finances), { expires: COOKIE_EXPIRATION });
            
            // Save workouts
            Cookies.set(DATA_KEYS.WORKOUTS, JSON.stringify(appState.workouts), { expires: COOKIE_EXPIRATION });
            
            // Save diet
            Cookies.set(DATA_KEYS.DIET, JSON.stringify(appState.diet), { expires: COOKIE_EXPIRATION });
            
            // Save grocery
            Cookies.set(DATA_KEYS.GROCERY, JSON.stringify(appState.grocery), { expires: COOKIE_EXPIRATION });
            
            // Save tutorial viewed status
            Cookies.set(DATA_KEYS.TUTORIAL_VIEWED, appState.settings.tutorialViewed.toString(), { expires: COOKIE_EXPIRATION });
        }
        
        // Task management functions
        function addTask(text, priority = 'medium', date = null) {
            if (!text.trim()) return;
            
            const now = new Date();
            const taskDate = date || now.toISOString().split('T')[0];
            
            const newTask = {
                id: Date.now(),
                text: text,
                priority: priority,
                date: taskDate,
                createdAt: now.toISOString(),
                completed: false
            };
            
            appState.tasks.unshift(newTask);
            saveAppData();
            renderTasks();
            showNotification('Tarefa adicionada com sucesso!');
        }
        
        function toggleTaskCompletion(id) {
            const task = appState.tasks.find(t => t.id === id);
            if (task) {
                task.completed = !task.completed;
                saveAppData();
                renderTasks();
                showNotification(task.completed ? 'Tarefa marcada como conclu√≠da!' : 'Tarefa marcada como pendente');
            }
        }
        
        function deleteTask(id) {
            appState.tasks = appState.tasks.filter(t => t.id !== id);
            saveAppData();
            renderTasks();
            showNotification('Tarefa removida com sucesso!');
        }
        
        function clearAllTasks() {
            appState.tasks = [];
            saveAppData();
            renderTasks();
            showNotification('Todas as tarefas foram removidas!');
        }
        
        function renderTasks() {
            if (appState.tasks.length === 0) {
                dom.tasksList.innerHTML = `
                    <div class="empty-state">
                        <i class="fas fa-clipboard-list"></i>
                        <h3>Nenhuma tarefa adicionada</h3>
                        <p>Comece adicionando suas tarefas di√°rias</p>
                    </div>
                `;
                return;
            }
            
            // Group tasks by date
            const tasksByDate = {};
            appState.tasks.forEach(task => {
                if (!tasksByDate[task.date]) {
                    tasksByDate[task.date] = [];
                }
                tasksByDate[task.date].push(task);
            });
            
            // Sort dates
            const sortedDates = Object.keys(tasksByDate).sort((a, b) => new Date(a) - new Date(b));
            
            // Generate HTML
            let html = '';
            
            sortedDates.forEach(date => {
                const tasks = tasksByDate[date];
                const dateObj = new Date(date);
                const today = new Date();
                today.setHours(0, 0, 0, 0);
                
                let dateLabel;
                if (dateObj.toDateString() === today.toDateString()) {
                    dateLabel = '<strong>Hoje</strong>';
                } else if (dateObj.toDateString() === new Date(today.getTime() + 86400000).toDateString()) {
                    dateLabel = '<strong>Amanh√£</strong>';
                } else {
                    dateLabel = dateObj.toLocaleDateString('pt-BR', { weekday: 'long', day: 'numeric', month: 'long' });
                    dateLabel = dateLabel.charAt(0).toUpperCase() + dateLabel.slice(1);
                }
                
                html += `<div class="date-header" style="margin: 15px 0 8px; font-size: 0.9rem;">${dateLabel}</div>`;
                
                tasks.forEach(task => {
                    const priorityClass = `priority-${task.priority}`;
                    const completedClass = task.completed ? 'completed' : '';
                    
                    html += `
                        <div class="task-item ${priorityClass} ${completedClass}" data-id="${task.id}">
                            <div class="task-check">
                                <input type="checkbox" id="task-${task.id}" ${task.completed ? 'checked' : ''}>
                            </div>
                            <div class="task-content">
                                <div class="task-title">${task.text}</div>
                                <div class="priority-badge">${getPriorityText(task.priority)}</div>
                            </div>
                            <div class="task-actions">
                                <button class="danger small"><i class="fas fa-trash"></i></button>
                            </div>
                        </div>
                    `;
                });
            });
            
            dom.tasksList.innerHTML = html;
            
            // Add event listeners
            appState.tasks.forEach(task => {
                // Completion toggle
                const checkbox = document.getElementById(`task-${task.id}`);
                if (checkbox) {
                    checkbox.addEventListener('change', () => toggleTaskCompletion(task.id));
                }
                
                // Delete button
                const deleteBtn = document.querySelector(`.task-item[data-id="${task.id}"] .danger`);
                if (deleteBtn) {
                    deleteBtn.addEventListener('click', () => deleteTask(task.id));
                }
            });
        }
        
        function getPriorityText(priority) {
            switch (priority) {
                case 'low': return 'Baixa Prioridade';
                case 'medium': return 'M√©dia Prioridade';
                case 'high': return 'Alta Prioridade';
                default: return 'Prioridade';
            }
        }
        
        // Finance management functions
        function addTransaction(name, amount, type, category) {
            if (!name.trim() || isNaN(amount) || amount <= 0) {
                showNotification('Preencha todos os campos corretamente!');
                return;
            }
            
            const now = new Date();
            
            const newTransaction = {
                id: Date.now(),
                name: name,
                amount: parseFloat(amount),
                type: type,
                category: category,
                date: now.toISOString()
            };
            
            appState.finances.unshift(newTransaction);
            saveAppData();
            renderTransactions();
            calculateFinances();
            showNotification('Transa√ß√£o adicionada com sucesso!');
        }
        
        function deleteTransaction(id) {
            appState.finances = appState.finances.filter(t => t.id !== id);
            saveAppData();
            renderTransactions();
            calculateFinances();
            showNotification('Transa√ß√£o removida com sucesso!');
        }
        
        function clearAllFinances() {
            appState.finances = [];
            saveAppData();
            renderTransactions();
            calculateFinances();
            showNotification('Todas as finan√ßas foram removidas!');
        }
        
        function calculateFinances() {
            let totalIncome = 0;
            let totalExpense = 0;
            
            appState.finances.forEach(transaction => {
                if (transaction.type === 'income') {
                    totalIncome += transaction.amount;
                } else {
                    totalExpense += transaction.amount;
                }
            });
            
            const balance = totalIncome - totalExpense;
            const savingsPercentage = totalIncome > 0 ? 
                Math.round((balance / totalIncome) * 100) : 0;
            
            dom.balanceValue.textContent = formatFinancialValue(balance);
            dom.incomeValue.textContent = formatFinancialValue(totalIncome);
            dom.expenseValue.textContent = formatFinancialValue(totalExpense);
            dom.savingsValue.textContent = formatFinancialValue(savingsPercentage, false);
            
            // Set balance color
            dom.balanceValue.className = 
                balance >= 0 ? 'summary-value positive' : 'summary-value negative';
        }
        
        function renderTransactions() {
            if (appState.finances.length === 0) {
                dom.transactionsList.innerHTML = `
                    <tr>
                        <td colspan="5">
                            <div class="empty-state" style="padding: 20px 0;">
                                <i class="fas fa-receipt"></i>
                                <h3>Nenhuma transa√ß√£o registrada</h3>
                                <p>Adicione suas receitas e despesas para come√ßar</p>
                            </div>
                        </td>
                    </tr>
                `;
                return;
            }
            
            let html = '';
            
            appState.finances.forEach(transaction => {
                const date = new Date(transaction.date);
                const formattedDate = date.toLocaleDateString('pt-BR');
                const displayAmount = appState.settings.showValues ? 
                    `${transaction.type === 'income' ? '+' : '-'} R$ ${transaction.amount.toFixed(2)}` : 
                    `${transaction.type === 'income' ? '+' : '-'} ‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢`;
                
                html += `
                    <tr data-id="${transaction.id}">
                        <td>${transaction.name}</td>
                        <td>${getCategoryName(transaction.category)}</td>
                        <td>${formattedDate}</td>
                        <td class="${transaction.type === 'income' ? 'positive' : 'negative'}">
                            ${displayAmount}
                        </td>
                        <td>
                            <button class="danger small"><i class="fas fa-trash"></i></button>
                        </td>
                    </tr>
                `;
            });
            
            dom.transactionsList.innerHTML = html;
            
            // Add event listeners for delete buttons
            appState.finances.forEach(transaction => {
                const deleteBtn = document.querySelector(`tr[data-id="${transaction.id}"] .danger`);
                if (deleteBtn) {
                    deleteBtn.addEventListener('click', () => deleteTransaction(transaction.id));
                }
            });
        }
        
        function formatFinancialValue(value, isCurrency = true) {
            if (appState.settings.showValues) {
                return isCurrency ? `R$ ${value.toFixed(2)}` : `${value}%`;
            }
            return isCurrency ? "R$ ‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢" : "‚Ä¢‚Ä¢‚Ä¢%";
        }
        
        function toggleVisibility() {
            appState.settings.showValues = !appState.settings.showValues;
            saveAppData();
            updateVisibilityIcon();
            calculateFinances();
            renderTransactions();
            showNotification(appState.settings.showValues ? 
                "Valores financeiros vis√≠veis" : "Valores financeiros ocultos");
        }
        
        function updateVisibilityIcon() {
            const icon = dom.toggleVisibility.querySelector('i');
            icon.className = appState.settings.showValues ? 'fas fa-eye' : 'fas fa-eye-slash';
        }
        
        function getCategoryName(category) {
            const categories = {
                'salary': 'Sal√°rio',
                'rent': 'Moradia',
                'food': 'Alimenta√ß√£o',
                'transport': 'Transporte',
                'health': 'Sa√∫de',
                'leisure': 'Lazer',
                'other': 'Outro'
            };
            return categories[category] || category;
        }
        
        // Exercise management functions
        function showExercisesSection(muscleGroup) {
            appState.currentMuscleGroup = muscleGroup;
            dom.muscleGroupName.textContent = getMuscleGroupName(muscleGroup);
            dom.exercisesSection.style.display = 'block';
            renderExercises();
        }
        
        function hideExercisesSection() {
            dom.exercisesSection.style.display = 'none';
            appState.currentMuscleGroup = null;
        }
        
        function getMuscleGroupName(muscle) {
            const names = {
                'chest': 'Peito',
                'back': 'Costas',
                'legs': 'Pernas',
                'shoulders': 'Ombros',
                'biceps': 'Bra√ßos',
                'triceps': 'Abd√¥men/Lombar'
            };
            return names[muscle] || muscle;
        }
        
        function addExercise(name, sets, reps) {
            if (!name.trim()) return;
            
            const newExercise = {
                id: Date.now(),
                name: name,
                sets: sets,
                reps: reps,
                completed: false
            };
            
            appState.workouts[appState.currentMuscleGroup].push(newExercise);
            saveAppData();
            renderExercises();
            showNotification('Exerc√≠cio adicionado com sucesso!');
            
            // Clear form
            dom.exerciseName.value = '';
            dom.exerciseSets.value = '';
            dom.exerciseReps.value = '';
        }
        
        function toggleExerciseCompletion(id) {
            const exercises = appState.workouts[appState.currentMuscleGroup];
            const exercise = exercises.find(e => e.id === id);
            if (exercise) {
                exercise.completed = !exercise.completed;
                saveAppData();
                renderExercises();
                showNotification(exercise.completed ? 'Exerc√≠cio marcado como feito!' : 'Exerc√≠cio marcado como pendente');
            }
        }
        
        function deleteExercise(id) {
            appState.workouts[appState.currentMuscleGroup] = 
                appState.workouts[appState.currentMuscleGroup].filter(e => e.id !== id);
            saveAppData();
            renderExercises();
            showNotification('Exerc√≠cio removido com sucesso!');
        }
        
        function renderExercises() {
            const exercises = appState.workouts[appState.currentMuscleGroup];
            
            if (exercises.length === 0) {
                dom.exercisesList.innerHTML = `
                    <div class="empty-state">
                        <i class="fas fa-dumbbell"></i>
                        <h3>Nenhum exerc√≠cio adicionado</h3>
                        <p>Adicione exerc√≠cios para este grupo muscular</p>
                    </div>
                `;
                return;
            }
            
            let html = '';
            
            exercises.forEach(exercise => {
                const completedClass = exercise.completed ? 'exercise-completed' : '';
                
                html += `
                    <div class="exercise-item ${completedClass}" data-id="${exercise.id}">
                        <div class="exercise-check">
                            <input type="checkbox" id="exercise-${exercise.id}" ${exercise.completed ? 'checked' : ''}>
                        </div>
                        <div class="exercise-content">
                            <div class="exercise-title">${exercise.name}</div>
                            <div class="exercise-details">
                                <span>S√©ries: ${exercise.sets || '-'}</span>
                                <span>Reps: ${exercise.reps || '-'}</span>
                            </div>
                        </div>
                        <div class="exercise-actions">
                            <button class="danger small"><i class="fas fa-trash"></i></button>
                        </div>
                    </div>
                `;
            });
            
            dom.exercisesList.innerHTML = html;
            
            // Add event listeners
            exercises.forEach(exercise => {
                // Completion toggle
                const checkbox = document.getElementById(`exercise-${exercise.id}`);
                if (checkbox) {
                    checkbox.addEventListener('change', () => toggleExerciseCompletion(exercise.id));
                }
                
                // Delete button
                const deleteBtn = document.querySelector(`.exercise-item[data-id="${exercise.id}"] .danger`);
                if (deleteBtn) {
                    deleteBtn.addEventListener('click', () => deleteExercise(exercise.id));
                }
            });
        }
        
        // Diet management functions
        function addMeal(name, time, ingredients, calories = null) {
            if (!name.trim()) return;
            
            const newMeal = {
                id: Date.now(),
                name: name,
                time: time,
                ingredients: ingredients,
                calories: calories ? parseInt(calories) : null,
                createdAt: new Date().toISOString()
            };
            
            appState.diet.unshift(newMeal);
            saveAppData();
            renderDiet();
            showNotification('Refei√ß√£o adicionada com sucesso!');
            
            // Suggest adding ingredients to grocery list
            if (ingredients.trim()) {
                const addToGrocery = confirm('Deseja adicionar os ingredientes √† lista de compras?');
                if (addToGrocery) {
                    const ingredientList = ingredients.split('\n').filter(i => i.trim());
                    ingredientList.forEach(ingredient => {
                        addGroceryItem(ingredient, '', 'Ingredientes');
                    });
                    showNotification('Ingredientes adicionados √† lista de compras!');
                }
            }
        }
        
        function deleteMeal(id) {
            appState.diet = appState.diet.filter(m => m.id !== id);
            saveAppData();
            renderDiet();
            showNotification('Refei√ß√£o removida com sucesso!');
        }
        
        function renderDiet() {
            if (appState.diet.length === 0) {
                dom.mealsList.innerHTML = `
                    <div class="empty-state">
                        <i class="fas fa-utensils"></i>
                        <h3>Nenhuma refei√ß√£o planejada</h3>
                        <p>Adicione suas refei√ß√µes para come√ßar</p>
                    </div>
                `;
                return;
            }
            
            let html = '';
            
            appState.diet.forEach(meal => {
                const time = meal.time ? `<div class="meal-time">${meal.time}</div>` : '';
                const calories = meal.calories ? `<div><strong>Calorias:</strong> ${meal.calories}</div>` : '';
                
                html += `
                    <div class="meal-item" data-id="${meal.id}">
                        <div class="meal-header">
                            <div class="meal-title">${meal.name}</div>
                            ${time}
                        </div>
                        <div class="form-group">
                            <label>Ingredientes:</label>
                            <p>${meal.ingredients.replace(/\n/g, '<br>')}</p>
                        </div>
                        ${calories}
                        <div class="meal-actions" style="margin-top: 12px;">
                            <button class="danger small"><i class="fas fa-trash"></i> Remover</button>
                        </div>
                    </div>
                `;
            });
            
            dom.mealsList.innerHTML = html;
            
            // Add event listeners for delete buttons
            appState.diet.forEach(meal => {
                const deleteBtn = document.querySelector(`.meal-item[data-id="${meal.id}"] .danger`);
                if (deleteBtn) {
                    deleteBtn.addEventListener('click', () => deleteMeal(meal.id));
                }
            });
        }
        
        // Grocery management functions
        function addGroceryItem(name, quantity = '', category = '') {
            if (!name.trim()) return;
            
            const newItem = {
                id: Date.now(),
                name: name,
                quantity: quantity,
                category: category,
                purchased: false,
                createdAt: new Date().toISOString()
            };
            
            appState.grocery.unshift(newItem);
            saveAppData();
            renderGrocery();
            showNotification('Item adicionado √† lista de compras!');
        }
        
        function toggleGroceryItem(id) {
            const item = appState.grocery.find(i => i.id === id);
            if (item) {
                item.purchased = !item.purchased;
                saveAppData();
                renderGrocery();
                showNotification(item.purchased ? 'Item marcado como comprado!' : 'Item marcado como pendente');
            }
        }
        
        function deleteGroceryItem(id) {
            appState.grocery = appState.grocery.filter(i => i.id !== id);
            saveAppData();
            renderGrocery();
            showNotification('Item removido da lista de compras!');
        }
        
        function clearAllGrocery() {
            appState.grocery = [];
            saveAppData();
            renderGrocery();
            showNotification('Lista de compras limpa com sucesso!');
        }
        
        function renderGrocery() {
            if (appState.grocery.length === 0) {
                dom.groceryList.innerHTML = `
                    <div class="empty-state">
                        <i class="fas fa-shopping-cart"></i>
                        <h3>Sua lista de compras est√° vazia</h3>
                        <p>Adicione itens √† sua lista de compras</p>
                    </div>
                `;
                return;
            }
            
            // Group by category
            const itemsByCategory = {};
            appState.grocery.forEach(item => {
                const category = item.category || 'Outros';
                if (!itemsByCategory[category]) {
                    itemsByCategory[category] = [];
                }
                itemsByCategory[category].push(item);
            });
            
            let html = '';
            
            Object.keys(itemsByCategory).forEach(category => {
                html += `<div class="category-header" style="margin: 15px 0 8px; font-size: 0.9rem;">${category}</div>`;
                
                itemsByCategory[category].forEach(item => {
                    const purchasedClass = item.purchased ? 'grocery-purchased' : '';
                    const quantity = item.quantity ? `<div class="grocery-quantity">${item.quantity}</div>` : '';
                    
                    html += `
                        <div class="grocery-item ${purchasedClass}" data-id="${item.id}">
                            <div class="grocery-check">
                                <input type="checkbox" id="grocery-${item.id}" ${item.purchased ? 'checked' : ''}>
                            </div>
                            <div class="grocery-content">
                                <div class="grocery-title">${item.name}</div>
                                ${quantity}
                            </div>
                            <div class="grocery-actions">
                                <button class="danger small"><i class="fas fa-trash"></i></button>
                            </div>
                        </div>
                    `;
                });
            });
            
            dom.groceryList.innerHTML = html;
            
            // Add event listeners
            appState.grocery.forEach(item => {
                // Purchase toggle
                const checkbox = document.getElementById(`grocery-${item.id}`);
                if (checkbox) {
                    checkbox.addEventListener('change', () => toggleGroceryItem(item.id));
                }
                
                // Delete button
                const deleteBtn = document.querySelector(`.grocery-item[data-id="${item.id}"] .danger`);
                if (deleteBtn) {
                    deleteBtn.addEventListener('click', () => deleteGroceryItem(item.id));
                }
            });
        }
        
        // Timer functions
        let timerInterval;
        let timerSeconds = 0;
        let isRunning = false;
        
        function startTimer() {
            if (!isRunning) {
                const minutes = parseInt(dom.minutesInput.value) || 0;
                const seconds = parseInt(dom.secondsInput.value) || 0;
                
                timerSeconds = minutes * 60 + seconds;
                
                if (timerSeconds > 0) {
                    isRunning = true;
                    
                    timerInterval = setInterval(() => {
                        timerSeconds--;
                        updateTimerDisplay();
                        
                        if (timerSeconds <= 0) {
                            clearInterval(timerInterval);
                            isRunning = false;
                            // Play sound
                            if (appState.settings.sounds) {
                                const audio = new Audio('data:audio/mp3;base64,SUQzBAAAAAABEVRYWFgAAAAtAAADY29tbWVudABCaWdTb3VuZEJhbmsuY29tIC8gTGFTb25vdGhlcXVlLm9yZwBURU5DAAAAHQAAA1N3aXRjaCBQbHVzIMKpIE5DSCBTb2Z0d2FyZQBUSVQyAAAABgAAAzIyMzUAVFNTRQAAAA8AAANMYXZmNTcuODMuMTAwAAAAAAAAAAAAAAD/80DEAAAAA0gAAAAATEFNRTMuMTAwVVVVVVVVVVVVVUxBTUUzLjEwMFVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVf/zQsRbAAADSAAAAABVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVf/zQMSkAAADSAAAAABVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVV');
                                audio.play();
                            }
                            showNotification('Tempo do cron√¥metro esgotado!');
                        }
                    }, 1000);
                }
            }
        }
        
        function pauseTimer() {
            if (isRunning) {
                clearInterval(timerInterval);
                isRunning = false;
                showNotification('Cron√¥metro pausado');
            }
        }
        
        function resetTimer() {
            clearInterval(timerInterval);
            isRunning = false;
            timerSeconds = 0;
            updateTimerDisplay();
            dom.minutesInput.value = '';
            dom.secondsInput.value = '';
            showNotification('Cron√¥metro reiniciado');
        }
        
        function updateTimerDisplay() {
            const hours = Math.floor(timerSeconds / 3600);
            const minutes = Math.floor((timerSeconds % 3600) / 60);
            const seconds = timerSeconds % 60;
            
            dom.timerDisplay.textContent = 
                `${hours.toString().padStart(2, '0')}:${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
        }
        
        // Theme management
        function toggleTheme() {
            appState.settings.darkMode = !appState.settings.darkMode;
            saveAppData();
            updateTheme();
        }
        
        function updateTheme() {
            if (appState.settings.darkMode) {
                document.documentElement.setAttribute('data-theme', 'dark');
                dom.themeToggle.innerHTML = '<i class="fas fa-sun"></i>';
            } else {
                document.documentElement.removeAttribute('data-theme');
                dom.themeToggle.innerHTML = '<i class="fas fa-moon"></i>';
            }
        }
        
        // Tutorial management
        function showTutorial() {
            setActiveSection('tutorial');
            appState.settings.tutorialViewed = true;
            saveAppData();
        }
        
        // Navigation functions
       function setActiveSection(sectionId) {
            // Hide all sections
            dom.sections.forEach(section => {
                section.classList.remove('active');
            });
            
            // Deactivate all tabs
            dom.tabs.forEach(tab => {
                tab.classList.remove('active');
            });
            
            // Activate selected section
            document.getElementById(sectionId).classList.add('active');
            
            // Activate corresponding tab
            const tab = document.querySelector(`.tab[data-tab="${sectionId}"]`);
            if (tab) {
                tab.classList.add('active');
            }
            
            appState.currentSection = sectionId;
            
            // Atualizar gr√°ficos quando acessar a se√ß√£o de relat√≥rios
            if (sectionId === 'reports') {
                renderExpensesChart();
            }
        }
 
        function setDietTab(activeTab) {
            dom.dietTabs.forEach(tab => {
                tab.classList.toggle('active', tab.dataset.dietTab === activeTab);
            });
            
            if (activeTab === 'meals') {
                dom.mealsSection.style.display = 'block';
                dom.grocerySection.style.display = 'none';
            } else {
                dom.mealsSection.style.display = 'none';
                dom.grocerySection.style.display = 'block';
            }
        }
        
        // UI functions
        function showNotification(message) {
            dom.notificationText.textContent = message;
            dom.notification.classList.add('show');
            
            setTimeout(() => {
                dom.notification.classList.remove('show');
            }, 3000);
        }
        
        function showModal(modal) {
            modal.classList.add('show');
        }
        
        function hideModal(modal) {
            modal.classList.remove('show');
        }
        
        // Initialize charts
         // Initialize charts
        function initCharts() {
            // Tasks chart (mantido est√°tico para exemplo)
            const tasksCtx = dom.tasksChart.getContext('2d');
            new Chart(tasksCtx, {
                type: 'bar',
                data: {
                    labels: ['Seg', 'Ter', 'Qua', 'Qui', 'Sex', 'S√°b', 'Dom'],
                    datasets: [{
                        label: 'Tarefas Conclu√≠das',
                        data: [3, 5, 2, 6, 4, 1, 7],
                        backgroundColor: 'rgba(74, 222, 128, 0.5)',
                        borderColor: 'rgba(74, 222, 128, 1)',
                        borderWidth: 1
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        y: {
                            beginAtZero: true
                        }
                    }
                }
            });
        }

        // Fun√ß√£o para obter dados reais de despesas para o gr√°fico
        function getExpenseDataForChart() {
            const expensesByCategory = {};

            // Filtrar apenas despesas e agrupar por categoria
            appState.finances.forEach(transaction => {
                if (transaction.type === 'expense') {
                    if (!expensesByCategory[transaction.category]) {
                        expensesByCategory[transaction.category] = 0;
                    }
                    expensesByCategory[transaction.category] += transaction.amount;
                }
            });

            // Converter para arrays de labels e dados
            const labels = Object.keys(expensesByCategory).map(cat => getCategoryName(cat));
            const data = Object.values(expensesByCategory);

            return { labels, data };
        }

        // Fun√ß√£o para renderizar o gr√°fico de despesas com dados reais
        function renderExpensesChart() {
            const expensesCtx = dom.expensesChart.getContext('2d');
            
            // Destruir gr√°fico anterior se existir
            if (window.expensesChartInstance) {
                window.expensesChartInstance.destroy();
            }

            const expensesData = getExpenseDataForChart();

            window.expensesChartInstance = new Chart(expensesCtx, {
                type: 'doughnut',
                data: {
                    labels: expensesData.labels,
                    datasets: [{
                        label: 'Gastos por Categoria',
                        data: expensesData.data,
                        backgroundColor: [
                            'rgba(67, 97, 238, 0.5)',
                            'rgba(74, 222, 128, 0.5)',
                            'rgba(245, 158, 11, 0.5)',
                            'rgba(247, 37, 133, 0.5)',
                            'rgba(148, 163, 184, 0.5)',
                            'rgba(100, 200, 150, 0.5)',
                            'rgba(200, 150, 200, 0.5)'
                        ],
                        borderColor: [
                            'rgba(67, 97, 238, 1)',
                            'rgba(74, 222, 128, 1)',
                            'rgba(245, 158, 11, 1)',
                            'rgba(247, 37, 133, 1)',
                            'rgba(148, 163, 184, 1)',
                            'rgba(100, 200, 150, 1)',
                            'rgba(200, 150, 200, 1)'
                        ],
                        borderWidth: 1
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            position: 'right'
                        }
                    }
                }
            });
        }
        // Setup event listeners
        function setupEventListeners() {
            // Navigation
            dom.tabs.forEach(tab => {
                tab.addEventListener('click', () => {
                    setActiveSection(tab.dataset.tab);
                });
            });
            
            // Diet tabs
            dom.dietTabs.forEach(tab => {
                tab.addEventListener('click', () => {
                    setDietTab(tab.dataset.dietTab);
                });
            });
            
            // Task management
            dom.addTaskBtn.addEventListener('click', () => {
                addTask(
                    dom.taskInput.value, 
                    dom.taskPriority.value, 
                    dom.taskDate.value || null
                );
                dom.taskInput.value = '';
                dom.taskDate.value = '';
            });
            
            dom.clearTasksBtn.addEventListener('click', () => {
                showModal(dom.clearTasksModal);
            });
            
            // Finance management
            dom.addTransactionBtn.addEventListener('click', () => {
                addTransaction(
                    dom.transactionName.value,
                    dom.transactionAmount.value,
                    dom.transactionType.value,
                    dom.transactionCategory.value
                );
                dom.transactionName.value = '';
                dom.transactionAmount.value = '';
            });
            
            dom.clearFinancesBtn.addEventListener('click', () => {
                showModal(dom.clearFinancesModal);
            });
            
            // Toggle visibility
            dom.toggleVisibility.addEventListener('click', toggleVisibility);
            
            // Timer
            dom.startTimerBtn.addEventListener('click', startTimer);
            dom.pauseTimerBtn.addEventListener('click', pauseTimer);
            dom.resetTimerBtn.addEventListener('click', resetTimer);
            
            // Workout muscle groups
            document.querySelectorAll('.muscle-card').forEach(card => {
                card.addEventListener('click', () => {
                    const muscleGroup = card.dataset.muscle;
                    showExercisesSection(muscleGroup);
                });
            });
            
            dom.backToWorkoutBtn.addEventListener('click', hideExercisesSection);
            
            // Exercises
            dom.addExerciseBtn.addEventListener('click', () => {
                addExercise(
                    dom.exerciseName.value,
                    dom.exerciseSets.value,
                    dom.exerciseReps.value
                );
            });
            
            // Diet
            dom.addMealBtn.addEventListener('click', () => {
                addMeal(
                    dom.mealName.value,
                    dom.mealTime.value,
                    dom.mealIngredients.value,
                    dom.mealCalories.value
                );
                dom.mealName.value = '';
                dom.mealTime.value = '';
                dom.mealIngredients.value = '';
                dom.mealCalories.value = '';
            });
            
            // Grocery
            dom.addGroceryBtn.addEventListener('click', () => {
                addGroceryItem(
                    dom.groceryItem.value,
                    dom.groceryQuantity.value,
                    dom.groceryCategory.value
                );
                dom.groceryItem.value = '';
                dom.groceryQuantity.value = '';
                dom.groceryCategory.value = '';
            });
            
            dom.clearGroceryBtn.addEventListener('click', () => {
                showModal(dom.clearGroceryModal);
            });
            
            // Settings
            dom.themeToggle.addEventListener('click', toggleTheme);
            dom.darkModeToggle.addEventListener('change', toggleTheme);
            
            dom.exportAllDataBtn.addEventListener('click', exportAllData);
            dom.resetAllDataBtn.addEventListener('click', resetAllData);
            
            // Tutorial
            dom.tutorialBtn.addEventListener('click', showTutorial);
            dom.backToAppBtn.addEventListener('click', () => {
                setActiveSection('tasks');
            });
            
            // Cookie consent
            dom.acceptCookies.addEventListener('click', () => {
                Cookies.set(DATA_KEYS.COOKIE_CONSENT, 'true', { expires: COOKIE_EXPIRATION });
                hideModal(dom.cookieModal);
                showNotification('Cookies autorizados. Seus dados ser√£o salvos localmente.');
            });
            
            dom.rejectCookies.addEventListener('click', () => {
                Cookies.set(DATA_KEYS.COOKIE_CONSENT, 'false', { expires: COOKIE_EXPIRATION });
                hideModal(dom.cookieModal);
                showNotification('Cookies recusados. Ative os cookies para salvar seus dados.');
            });
            
            // Clear modals
            dom.cancelClearTasks.addEventListener('click', () => hideModal(dom.clearTasksModal));
            dom.confirmClearTasks.addEventListener('click', () => {
                clearAllTasks();
                hideModal(dom.clearTasksModal);
            });
            
            dom.cancelClearFinances.addEventListener('click', () => hideModal(dom.clearFinancesModal));
            dom.confirmClearFinances.addEventListener('click', () => {
                clearAllFinances();
                hideModal(dom.clearFinancesModal);
            });
            
            dom.cancelClearGrocery.addEventListener('click', () => hideModal(dom.clearGroceryModal));
            dom.confirmClearGrocery.addEventListener('click', () => {
                clearAllGrocery();
                hideModal(dom.clearGroceryModal);
            });
        }
        
        // Data export/import
        function exportAllData() {
            const data = {
                tasks: appState.tasks,
                finances: appState.finances,
                workouts: appState.workouts,
                diet: appState.diet,
                grocery: appState.grocery,
                settings: appState.settings,
                exportedAt: new Date().toISOString()
            };
            
            const dataStr = JSON.stringify(data, null, 2);
            const dataUri = 'data:application/json;charset=utf-8,'+ encodeURIComponent(dataStr);
            
            const exportFileDefaultName = `organizeDay-export-${new Date().toISOString().split('T')[0]}.json`;
            
            const linkElement = document.createElement('a');
            linkElement.setAttribute('href', dataUri);
            linkElement.setAttribute('download', exportFileDefaultName);
            linkElement.click();
            
            showNotification('Dados exportados com sucesso!');
        }
        
        function resetAllData() {
            if (confirm('Tem certeza que deseja limpar todos os dados? Esta a√ß√£o n√£o pode ser desfeita.')) {
                appState.tasks = [];
                appState.finances = [];
                appState.workouts = {
                    chest: [],
                    back: [],
                    legs: [],
                    shoulders: [],
                    biceps: [],
                    triceps: []
                };
                appState.diet = [];
                appState.grocery = [];
                appState.settings.darkMode = false;
                
                saveAppData();
                
                renderTasks();
                renderTransactions();
                calculateFinances();
                renderDiet();
                renderGrocery();
                updateTheme();
                
                showNotification('Todos os dados foram resetados!');
            }
        }
        
        // Initialize the app when DOM is loaded
        document.addEventListener('DOMContentLoaded', initApp);
    </script>
</body>
</html>